<?php
$hoi = $_GET['text']; $key = 'jukyno'; if($_GET['key'] == $key){ $cookie = 'THAY COOKIE Ở ĐÂY'; $text = Xuly($hoi,$cookie); 
         if($text == 'I have no response'){ $text = 'Vui lòng nhập câu hỏi nhá'; } 
         if($text == 'Tôi không biết bạn đang nói gì. Hãy dạy tôi'){ $text = 'Mình không hiểu ! hãy dạy mình đi. :D'; } 
           echo '{ "messages": [ {"text": "'.$text.'"} ] }'; }else{ echo '{ "messages": [ {"text": "Key không tồn tại !"} ] }'; }
function Xuly($text,$cookie) { $url = 'http://www.simsimi.com/getRealtimeReq?lc=vn&ft=1&normalProb=0&reqText='.urlencode($text).'&status=W&talkCnt=6';$ch = @curl_init(); curl_setopt($ch, CURLOPT_URL, $url); $head[] = "Connection: keep-alive"; $head[] = "Keep-Alive: 300"; $head[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; $head[] = "Accept-Language: en-us,en;q=0.5"; curl_setopt($ch, CURLOPT_USERAGENT, 'Opera/9.80 (Windows NT 6.0) Presto/2.12.388 Version/12.14'); curl_setopt($ch, CURLOPT_ENCODING, ''); curl_setopt($ch, CURLOPT_COOKIE, $cookie); curl_setopt($ch, CURLOPT_HTTPHEADER, $head); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($ch, CURLOPT_TIMEOUT, 60); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Expect:' )); $page = curl_exec($ch); curl_close($ch); $get = explode('"',$page); $ketqua = $get[5]; return $ketqua; }
